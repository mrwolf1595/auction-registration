# โ ุชุญุฏูุซ ุฏุนู ุงูุชูููุนูู ูุนุงู

## ุงููุดููุฉ ุงูุชู ุชู ุญููุง

### ๐ด ุงููุดููุฉ ุงูุณุงุจูุฉ:
ูุงู ุงููุธุงู ูุฏุนู **ูุงุญุฏ ููุท** ูู ุงูุงุชููู:
- ุฅูุง ุงูุชูููุน ุงูุฑููู (ูู Canvas)
- ุฃู ุงูุงุณู ุงููุทุจูุน

ููุง ุงููุณุชุฎุฏู ูููุน ุนูู Canvasุ ูุงู ุงูููุฏ ููุณุญ ุงูุงุณู ุงููุทุจูุน.
ููุง ุงููุณุชุฎุฏู ููุชุจ ุงุณููุ ูุงู ุงูููุฏ ููุณุญ ุงูุชูููุน ุงูุฑููู.

**ุงููุชูุฌุฉ**: ูุงุญุฏ ุจุณ ูุงู ุจูุชุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุธูุฑ ูู PDF.

---

## โ ุงูุญู ุงูุฌุฏูุฏ

ุงูุขู ุงููุธุงู ูุฏุนู **ุงูุงุชููู ูุนุงู**:
- ุงูุชูููุน ุงูุฑููู (ูู Canvas) โ
- ุงูุงุณู ุงููุทุจูุน โ
- ุฃู ุงูุงุชููู ูุนุงู โโ

**ุงููุชูุฌุฉ**: ุงูุงุชููู ุจูุชุณุฌููุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุธูุฑูุง ูู PDF.

---

## ุงูุชุญุฏูุซุงุช ุงูุชูุตูููุฉ

### 1. `src/app/register/page.tsx`

#### ุงูุชุญูู ูู ุงูุตูุงุญูุฉ (onSubmit):
```typescript
// ูุจู ๐ด:
if (!signature) {
  alert('ูุฑุฌู ุงูุชูููุน ุนูู ุงููููุฐุฌ');
  return;
}

// ุจุนุฏ ๐ข:
if (!signature && !data.typedName) {
  alert('ูุฑุฌู ุงูุชูููุน ุนูู ุงููููุฐุฌ ุฃู ุฅุฏุฎุงู ุงุณูู ุงููุทุจูุน');
  return;
}
```

#### ุญูุธ ุงูุจูุงูุงุช:
```typescript
// ูุจู ๐ด:
const registrationData = {
  // ...
  signature,
  typedName: data.typedName || ''
};

// ุจุนุฏ ๐ข:
const registrationData = {
  // ...
  signature, // ุงูุชูููุน ุงูุฑููู ูู Canvas
  typedName: data.typedName || '', // ุงูุงุณู ุงููุทุจูุน
};

console.log('Signature (Canvas):', signature ? 'ููุฌูุฏ' : 'ุบูุฑ ููุฌูุฏ');
console.log('Typed Name:', data.typedName || 'ุบูุฑ ููุฌูุฏ');
```

#### ุฅูุบุงุก ุงููุณุญ ุงูุชููุงุฆู:
```typescript
// ูุจู ๐ด:
onSignatureChange={(signatureData: string) => {
  if (signatureData) {
    setSignature(signatureData);
    setIsSignatureValid(true);
    // ูุณุญ ุญูู ุงูุงุณู ุงููุทุจูุน โ
    const typedNameInput = document.querySelector('input[name="typedName"]');
    if (typedNameInput) {
      typedNameInput.value = '';
      setValue('typedName', '');
    }
  }
}}

// ุจุนุฏ ๐ข:
onSignatureChange={(signatureData: string) => {
  if (signatureData) {
    setSignature(signatureData);
    setIsSignatureValid(true);
    // ูุง ููุณุญ ุงูุงุณู ุงููุทุจูุน - ูุญุชูุธ ุจุงูุงุชููู โ
  }
}}
```

#### ุชุญุฏูุซ ุงูุตูุงุญูุฉ:
```typescript
// ูุจู ๐ด:
onChange={(e) => {
  if (e.target.value.trim()) {
    setSignature(e.target.value);
    setIsSignatureValid(true);
  } else {
    // ูุณุญ ุงูุชูููุน ุงูุฑููู โ
    setIsSignatureValid(false);
    setSignature('');
  }
}}

// ุจุนุฏ ๐ข:
onChange={(e) => {
  const hasTypedName = Boolean(e.target.value.trim());
  const canvasSignature = signatureRef.current?.getSignature();
  const hasCanvasSignature = Boolean(canvasSignature && canvasSignature !== '...');
  
  // ุตุงูุญ ุฅุฐุง ูุงู ูู ุชูููุน ุฑููู ุฃู ุงุณู ูุทุจูุน โ
  setIsSignatureValid(hasTypedName || hasCanvasSignature);
}}
```

---

### 2. `src/lib/robustPdfGenerator.ts`

#### ุนุฑุถ ุงูุชูููุนูู ูู PDF:

##### ููุฅูุฑุงุฑ (Declaration):
```typescript
// ูุจู ๐ด: ูุงุญุฏ ุจุณ
const signatureHTML = formData.signature ? 
  `<img src="${formData.signature}" />` : 
  `<div>${formData.typedName}</div>`;

// ุจุนุฏ ๐ข: ุงูุงุชููู
let signatureHTML = '';

// ุฅุฐุง ูุงู ูู ุชูููุน ุฑููู
if (formData.signature && formData.signature.startsWith('data:image')) {
  signatureHTML += `
    <div>
      <div>ุงูุชูููุน ุงูุฑููู:</div>
      <img src="${formData.signature}" />
    </div>`;
}

// ุฅุฐุง ูุงู ูู ุงุณู ูุทุจูุน
if (formData.typedName && formData.typedName.trim()) {
  signatureHTML += `
    <div>
      <div>ุงูุงุณู ุงููุทุจูุน:</div>
      <div>${formData.typedName}</div>
    </div>`;
}
```

##### ุญุงูุฉ ุงูุชูููุน:
```typescript
// ูุจู ๐ด:
ุงูุชูููุน: ${formData.signature ? 'ุชู ุงูุชูููุน' : 'ูู ูุชู ุงูุชูููุน'}

// ุจุนุฏ ๐ข:
ุงูุชูููุน: 
${formData.signature ? 'โ ุฑููู' : ''}
${formData.signature && formData.typedName ? ' + ' : ''}
${formData.typedName ? 'โ ูุทุจูุน' : ''}
```

---

## ุงูุฃูุซูุฉ

### ุงูุญุงูุฉ 1: ุชูููุน ุฑููู ููุท
```
ุงููุณุชุฎุฏู: ูููุน ุนูู Canvas ููุท
ุงููุชูุฌุฉ ูู PDF:
  ุงูุชูููุน: โ ุฑููู
  [ุตูุฑุฉ ุงูุชูููุน]
```

### ุงูุญุงูุฉ 2: ุงุณู ูุทุจูุน ููุท
```
ุงููุณุชุฎุฏู: ููุชุจ ุงุณูู ููุท
ุงููุชูุฌุฉ ูู PDF:
  ุงูุชูููุน: โ ูุทุจูุน
  [ุตูุฏูู ุงูุงุณู ุงููุทุจูุน]
```

### ุงูุญุงูุฉ 3: ุงูุงุชููู ูุนุงู โญ
```
ุงููุณุชุฎุฏู: ูููุน ุนูู Canvas + ููุชุจ ุงุณูู
ุงููุชูุฌุฉ ูู PDF:
  ุงูุชูููุน: โ ุฑููู + โ ูุทุจูุน
  
  ุงูุชูููุน ุงูุฑููู:
  [ุตูุฑุฉ ุงูุชูููุน]
  
  ุงูุงุณู ุงููุทุจูุน:
  [ุตูุฏูู ุงูุงุณู ุงููุทุจูุน]
```

---

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุจูุงูุงุช ุงููุญููุธุฉ:
```json
{
  "bidderName": "ุฃุญูุฏ ูุญูุฏ",
  "signature": "data:image/png;base64,...", // ุงูุชูููุน ุงูุฑููู
  "typedName": "ุฃุญูุฏ ูุญูุฏ ุนูู",            // ุงูุงุณู ุงููุทุจูุน
  // ... ุจุงูู ุงูุจูุงูุงุช
}
```

**ุงูุงุชููู ุจูุชุญูุธูุง ูุนุงู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Firebase Realtime Database.

---

## ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุฑุณุงูุฉ ุงูุฌุฏูุฏุฉ:
```
ูุจู ๐ด:
โ ุชู ุงูุชูููุน ุฃู ุฅุฏุฎุงู ุงูุงุณู ุจูุฌุงุญ

ุจุนุฏ ๐ข:
โ ุชู ุงูุชูููุน ุฃู ุฅุฏุฎุงู ุงูุงุณู ุจูุฌุงุญ (ููููู ุฅุถุงูุฉ ุงูุงุชููู)
```

ูุฐุง ูุฎุจุฑ ุงููุณุชุฎุฏู ุฃูู ููููู ุฅุถุงูุฉ ุงูุงุชููู ูุนุงู.

---

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### โ ูุฑููุฉ ุฃูุจุฑ
ุงููุณุชุฎุฏู ููุฏุฑ ูุฎุชุงุฑ:
- ุชูููุน ุฑููู ููุท
- ุงุณู ูุทุจูุน ููุท
- **ุงูุงุชููู ูุนุงู** (ุฌุฏูุฏ!)

### โ ูุง ูุณุญ ุชููุงุฆู
- ููุง ุชุถูู ูุงุญุฏุ ุงูุชุงูู ูุด ุจูุชูุณุญ
- ููููู ุฅุถุงูุฉ ูุงุญุฏ ุจุนุฏ ุงูุชุงูู ุจุฏูู ูุดุงูู

### โ ุนุฑุถ ูุงุถุญ ูู PDF
- ูู ูุงุญุฏ ุจูุชุนุฑุถ ุจุดูู ูููุตู
- ุนููุงู ูุงุถุญ ููู ูุงุญุฏ
- ุณูู ุงูุชูููุฒ ุจูููู

### โ ุญูุธ ูุงูู
- ุงูุงุชููู ุจูุชุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุงุชููู ุจูุธูุฑูุง ูู PDF
- ูุง ููุฏุงู ููุจูุงูุงุช

---

## ุงูุงุฎุชุจุงุฑ

### ุฌุฑุจ ุงูุณููุงุฑูููุงุช:

#### ุงูุณููุงุฑูู 1: ุชูููุน ุฑููู ููุท
1. ููุน ุนูู Canvas
2. ุงุถุบุท "ุชุณุฌูู ุงููุดุงุฑูุฉ"
3. ุงูุชุญ PDF
4. ุชุญูู: ูุธูุฑ ุงูุชูููุน ุงูุฑููู โ

#### ุงูุณููุงุฑูู 2: ุงุณู ูุทุจูุน ููุท
1. ุงูุชุจ ุงุณูู ูู ุญูู "ุงูุงุณู ุงููุทุจูุน"
2. ุงุถุบุท "ุชุณุฌูู ุงููุดุงุฑูุฉ"
3. ุงูุชุญ PDF
4. ุชุญูู: ูุธูุฑ ุงูุงุณู ุงููุทุจูุน โ

#### ุงูุณููุงุฑูู 3: ุงูุงุชููู ูุนุงู โญ
1. ููุน ุนูู Canvas
2. ุงูุชุจ ุงุณูู ูู ุญูู "ุงูุงุณู ุงููุทุจูุน"
3. ุงุถุบุท "ุชุณุฌูู ุงููุดุงุฑูุฉ"
4. ุงูุชุญ PDF
5. ุชุญูู: ูุธูุฑ ุงูุงุชููู โโ

---

## ูุจู ูุจุนุฏ

### ูุจู ๐ด:
```
ุงููุณุชุฎุฏู ูููุน โ ุงูุงุณู ุงููุทุจูุน ูููุณุญ
ุงููุณุชุฎุฏู ููุชุจ ุงุณูู โ ุงูุชูููุน ูููุณุญ
ุงููุชูุฌุฉ: ูุงุญุฏ ููุท ููุญูุธ
```

### ุจุนุฏ ๐ข:
```
ุงููุณุชุฎุฏู ูููุน โ ุงูุงุณู ุงููุทุจูุน ูุจูู
ุงููุณุชุฎุฏู ููุชุจ ุงุณูู โ ุงูุชูููุน ูุจูู
ุงููุชูุฌุฉ: ุงูุงุชููู ููุญูุธูุง โ
```

---

## ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ุงููุธุงู ููุฏุนู:
- โ ุงูุชูููุน ุงูุฑููู
- โ ุงูุงุณู ุงููุทุจูุน
- โ **ุงูุงุชููู ูุนุงู** (ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ)

**ุงูุขู ุงููุณุชุฎุฏู ุนูุฏู ูุฑููุฉ ุฃูุจุฑ ููุง ูููุฏ ุฃู ุจูุงูุงุช!** ๐

---

## ุงููููุงุช ุงููุญุฏุซุฉ

1. `src/app/register/page.tsx`
   - ุชุญุฏูุซ `onSubmit`
   - ุชุญุฏูุซ `onSignatureChange`
   - ุชุญุฏูุซ `onChange` ููุงุณู ุงููุทุจูุน

2. `src/lib/robustPdfGenerator.ts`
   - ุชุญุฏูุซ `generateDeclarationPNG`
   - ุชุญุฏูุซ `generateReceiptPNG`
   - ุนุฑุถ ุงูุงุชููู ูู PDF

---

**ุชูุงู! ุงููุธุงู ุงูุขู ูุฏุนู ุงูุงุชููู ูุนุงู! ๐**

